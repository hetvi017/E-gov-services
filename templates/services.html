{% extends "base.html" %}

{% block button %}
  <a class="px-6 py-2 bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary rounded-full font-semibold hover:bg-primary/20 dark:hover:bg-primary/30 transition-colors duration-200" href="/">Logout</a>
{% endblock %}
{% block content %}
<div class="w-full max-w-7xl mx-auto p-6 bg-white dark:bg-[#063b20] rounded-xl shadow-lg">

  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-3xl font-extrabold text-gray-900 dark:text-white">Our Services</h2>
    <div class="flex items-center space-x-2">
      <button id="gridViewBtn" class="p-2 rounded-lg bg-primary text-white hover:bg-primary/80">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h4v4H4V6zm6 0h4v4h-4V6zm6 0h4v4h-4V6zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z" />
        </svg>
      </button>
      <button id="listViewBtn"
        class="p-2 rounded-lg bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-900 dark:text-white">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Services Container -->
  <div id="servicesContainer"
    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 transition-all duration-300">
    {% if services %}
    {% for services in services %}
    <a href="{{ url_for('service_detail', id=services.id) }}"
      class="block border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden shadow-md hover:shadow-lg bg-background-light dark:bg-gray-800 transition transform hover:-translate-y-1">
      <img src="{{ url_for('static', filename='images/' + (services.image or 'default.jpg')) }}" alt="{{ services.title }}"
        class="w-full h-40 object-cover"/>
      <div class="p-5">
        <h3
          class="text-xl font-bold text-gray-900 dark:text-white mb-2 group-hover:text-primary transition truncate">
          {{ services.title }}</h3>
        <p class="text-gray-600 dark:text-gray-400 text-sm">{{ services.short_desc }}</p>
      </div>
    </a>
    {% endfor %}
    {% else %}
      <p>No services found.</p>
    {% endif %}
  </div>
</div>

<!-- View Toggle -->
<script>
  const gridBtn = document.getElementById('gridViewBtn');
  const listBtn = document.getElementById('listViewBtn');
  const container = document.getElementById('servicesContainer');

  gridBtn.addEventListener('click', () => {
    container.classList.remove('flex', 'flex-col');
    container.classList.add('grid', 'grid-cols-1', 'sm:grid-cols-2', 'lg:grid-cols-3');
  });

  listBtn.addEventListener('click', () => {
    container.classList.remove('grid', 'grid-cols-1', 'sm:grid-cols-2', 'lg:grid-cols-3');
    container.classList.add('flex', 'flex-col', 'space-y-4');
  });
</script>
{% endblock %}

{% block footer %}
  {% include "footer.html" %}
{% endblock %}